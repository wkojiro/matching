

<!--- 確認 --->
<% if current_user != nil %>
Current _user is <%= current_user.inspect %>
<% elsif current_client != nil %>
Current _user is <%= current_client.inspect %>
<% else %>
Not login
<% end %>
<!--- 確認 --->
<hr >
<!--- 検索部分 --->
<li>Search</li>

<%= search_form_for @search,url: root_path do |f| %>
  <%= f.label :summary_cont, 'タイトル' %>
  <%= f.text_field :summary_cont %>
  <div>
    <%= f.submit 'search' %>
  </div>
  <%= @search %>
<% end %>
<!--- 検索部分END --->




<% @campaigns.inspect %>
<%= @camp_cates %>
<% @campaigns.each do |camp| %>
<% if camp.startdate <= Date.today && camp.opflg == "1" %>
<%= camp.id %>
<%= camp.client_id %>
<%= camp.title %>
<%= camp.summary %>
<%= camp.content %>
<%= camp.startdate %>
<%= camp.enddate %>
<%= camp.opflg %>
<% @camps = Campaign.where(id: camp.id).first.categories %>
<% @camps.each do |f| %>        
<%= f.name %> 
<% end %>
<%= link_to "詳細", campaign_path(camp.id) %>
<% if user_logged_in? %>
返信する
<% end %>
<br />
<hr>
<% end %>
<% end %>

<hr>
現状は、campaign自体がクライアントに紐づいて処理をされてしまっている。
つまり、current_clientがいないとエラーになる。
  def show
     @campaign = current_client.campaigns.find_by(id: params[:id])
#    @campaigns = @client.campaigns

    end
    
→一応直してみたが、Clientが異なったとき位URL直タタキで編集とかできてしまうか、要確認。

Userのshowはhas_one belongs_toのアソシエーションを利用していない。これでいいのか不明。
  def show
    @user = User.find(params[:id])
    @resume = Resume.find(params[:id])
  end

<hr >
ログアウトしても、Clients/1を直接たたくとも見れてしまう。
<hr >

本来的にここにでるもの。
サーチ
リスト表示

